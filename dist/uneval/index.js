/* eslint-disable */
Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../utils/index.js");exports.default=function(a,r){var n,t,s,i,c,o,l,u={},b={},f=[],$=[],y=[],k=[];function v(e){return(t||void 0!==e)&&(n||null!==e)}function d(e){return"null"!==e&&"void 0"!==e}function N(a,r){var n=!1;for(var t in a)if(v(a[t])){var s=p(a[t]);d(s)&&(n=!0,k.push(`v${r}[${p(e.keyToNumMayBe(t))}]=${s}`))}return n}function p(a){if(v(a))if(y.indexOf(a)>-1)a="void 0";else{var r=a!=a?u:0===a&&1/a<0?b:a,n=f.indexOf(r);if(n<0){n=f.length,f[n]=r;var t=typeof a;switch(t){case"undefined":r="void 0";break;case"boolean":r=a?"!0":"!1";break;case"number":r=r===b?"-0":`${a}`;break;case"bigint":r=`BigInt(${a})`;break;case"string":r=`"${e.stringEncode(a)}"`;break;case"symbol":r=`Symbol.for(${p(a.toString().slice(7,-1))})`;break;case"function":r=null!=(r=i&&i(a))?p(r):null===r?NaN:`${a}`;break;default:switch(t=Object.prototype.toString.call(a).slice(8,-1)){case"Null":r="null";break;case"Boolean":r=`new Boolean(${+a})`;break;case"Number":r=`new Number(${p(+a)})`;break;case"String":r=`new String(${p(a.toString())})`;break;case"RegExp":r=`${a}`;break;case"Date":r=`new Date(${r=isNaN(a.getDate())?"NaN":`"${a.toISOString()}"`})`;break;case"Error":null!=(r=o&&o(a))?r=p(r):null===r?r=NaN:(N(a,n),r=a.constructor.name||a.name,r=`(function(_){\n_=${p(a.message)}\ntry{\n_=new ${r}(_)\n}catch{\n_=new Error(_)\n}\n_.stack=${p(a.stack)}\nreturn _\n})()`);break;case"Array":for(var l in r=!1,a)if(v(a[l])){var h=p(a[l]);if(d(h)){r=!0;var g=e.keyToNumMayBe(l);g===l&&(g=p(g)),k.push(`v${n}[${g}]=${h}`)}}r=r||s?`Array(${a.length})`:NaN;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":r=`new ${t}(${p(a.buffer)})`;break;case"ArrayBuffer":r=`(new Uint8Array([${new Uint8Array(a)}])).buffer`;break;case"Map":a.forEach((function(e,a){(v(a)||v(e))&&(a=p(a),e=p(e),(d(a)||d(e))&&(this.b=1,this.a.push(a,e),k.push(`v${this.i}.set(${a},${e})`)))}),r={b:0,i:n}),r=r.b||s?"new Map()":NaN;break;case"Set":a.forEach((function(e,a){v(e)&&d(e=p(e))&&(this.b=1,k.push(`v${this.i}.add(${e})`))}),r={b:0,i:n}),r=r.b||s?"new Set()":NaN;break;default:r=(t=Object.getPrototypeOf(a))&&t!==Object.prototype&&null!=(r=c&&c(a))?p(r):null===r?NaN:(r=N(a,n))||s?t?"{}":"Object.create(null)":NaN}}r==r?(a="v"+n,$.push(`${a}=${r}`)):(a="void 0",y.push(f.pop()))}else a="v"+n}else a=null===a?"null":"void 0";return a}switch(r&&(n=r.allowNulls,t=r.allowUndefineds,s=r.allowEmptyObjects,i=r.functions,c=r.classes,o=r.errors),p(a),console.log($),$.length){case 0:l="void 0";break;case 1:l=$[0].slice(3);break;default:l=`(function() {\nvar\n${$.join(",\n")}\n${k.join("\n")}\nreturn v0\n})()`}return l};
